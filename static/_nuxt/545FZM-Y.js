import{D as k,E as B,F as D,l as N,r as l,n as V,c,a as e,v as A,q as u,x as R,y as T,z as t,A as C,t as m,B as E,d as p,b as S,w as q,o as i,G as _,C as M}from"./UuX0VwB7.js";import{_ as j}from"./C6ijD7c3.js";const z={class:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},F={class:"max-w-md w-full space-y-8"},G={class:"card p-8"},I={key:0,class:"alert alert-error"},L=["disabled"],U={class:"mt-6 text-center"},K={__name:"login",setup($){const{isAuthenticated:x,isAuthReady:f,login:v}=k();B(),D();const{success:y,error:d}=N(),a=l(""),o=l(!1),r=l(""),b=async()=>{if(!a.value){r.value="请输入密码",d("请输入密码");return}o.value=!0,r.value="";try{await v(a.value),y("登录成功"),await _("/admin/dashboard")}catch(n){r.value=n.message||"登录失败",d(n.message||"登录失败，请检查密码")}finally{o.value=!1}};return V([x,f],([n,s])=>{s&&n&&_("/admin/dashboard")},{immediate:!0}),(n,s)=>{const h=M,w=j;return i(),c("div",z,[e("div",F,[s[3]||(s[3]=e("div",null,[e("div",{class:"text-center"},[e("h2",{class:"text-3xl font-bold text-gray-900"},"管理员登录"),e("p",{class:"mt-2 text-sm text-gray-600"},"DormDB 管理面板")])],-1)),e("div",G,[e("form",{onSubmit:A(b,["prevent"]),class:"space-y-6"},[e("div",null,[s[1]||(s[1]=e("label",{for:"password",class:"form-label"},"管理员密码",-1)),R(e("input",{id:"password","onUpdate:modelValue":s[0]||(s[0]=g=>C(a)?a.value=g:null),type:"password",class:"form-input",placeholder:"请输入管理员密码",required:""},null,512),[[T,t(a)]])]),t(r)?(i(),c("div",I,m(t(r)),1)):u("",!0),e("button",{type:"submit",class:"btn btn-primary w-full",disabled:t(o)},[t(o)?(i(),E(h,{key:0,name:"svg-spinners:90-ring",class:"mr-2"})):u("",!0),p(" "+m(t(o)?"登录中...":"登录"),1)],8,L)],32),e("div",U,[S(w,{to:"/",class:"text-sm text-blue-600 hover:text-blue-800"},{default:q(()=>s[2]||(s[2]=[p(" 返回首页 ")])),_:1,__:[2]})])])])])}}};export{K as default};
