import{D as g,l as k,r as n,E as B,c as d,a as s,v as D,q as m,x as N,y as V,z as t,A as E,t as p,B as A,d as _,b as C,w as S,o as i,C as T}from"./BeQt8jzg.js";import{_ as q}from"./BPnSQfJf.js";import{u as M}from"./CELlox2R.js";const R={class:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},j={class:"max-w-md w-full space-y-8"},z={class:"card p-8"},I={key:0,class:"alert alert-error"},L=["disabled"],U={class:"mt-6 text-center"},J={__name:"login",setup($){const{isAuthenticated:f,login:x}=M(),c=g(),{success:v,error:u}=k(),a=n(""),o=n(!1),r=n(""),b=async()=>{if(!a.value){r.value="请输入密码",u("请输入密码");return}o.value=!0,r.value="";try{await x(a.value),v("登录成功"),await c.push("/admin/dashboard")}catch(l){r.value=l.message||"登录失败",u(l.message||"登录失败，请检查密码")}finally{o.value=!1}};return B(()=>{f.value&&c.push("/admin/dashboard")}),(l,e)=>{const y=T,h=q;return i(),d("div",R,[s("div",j,[e[3]||(e[3]=s("div",null,[s("div",{class:"text-center"},[s("h2",{class:"text-3xl font-bold text-gray-900"},"管理员登录"),s("p",{class:"mt-2 text-sm text-gray-600"},"DormDB 管理面板")])],-1)),s("div",z,[s("form",{onSubmit:D(b,["prevent"]),class:"space-y-6"},[s("div",null,[e[1]||(e[1]=s("label",{for:"password",class:"form-label"},"管理员密码",-1)),N(s("input",{id:"password","onUpdate:modelValue":e[0]||(e[0]=w=>E(a)?a.value=w:null),type:"password",class:"form-input",placeholder:"请输入管理员密码",required:""},null,512),[[V,t(a)]])]),t(r)?(i(),d("div",I,p(t(r)),1)):m("",!0),s("button",{type:"submit",class:"btn btn-primary w-full",disabled:t(o)},[t(o)?(i(),A(y,{key:0,name:"svg-spinners:90-ring",class:"mr-2"})):m("",!0),_(" "+p(t(o)?"登录中...":"登录"),1)],8,L)],32),s("div",U,[C(h,{to:"/",class:"text-sm text-blue-600 hover:text-blue-800"},{default:S(()=>e[2]||(e[2]=[_(" 返回首页 ")])),_:1,__:[2]})])])])])}}};export{J as default};
